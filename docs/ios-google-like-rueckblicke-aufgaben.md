# Aufgabenliste für iOS-/Google-ähnliche Rückblicke

## 1. Personalisierung und Ranking schärfen
- [x] Score-Heuristiken kalibrieren und fehlende Qualitäts- sowie Personenmetriken ergänzen: `MemoryFeedBuilder` gewichtet Qualitäts- und Personenkennzahlen nun anhand personalisierbarer Profile, berücksichtigt Recency-Boni sowie Stale-Abschläge und markiert Cluster mit dem aktiven Profil.【F:src/Service/Feed/MemoryFeedBuilder.php†L31-L220】
- [x] Feedback- und Favoriten-Tracking konzipieren, inklusive persistenter Nutzerprofile und Opt-out-Logik: Die neue `FeedUserPreferenceStorage` legt Favoriten und Opt-out-Algorithmen je Nutzer und Profil im JSON-Backend ab, während der `FeedController` Filterung, Metadaten und Favoriten-Markierung übernimmt.【F:src/Service/Feed/FeedUserPreferenceStorage.php†L17-L184】【F:src/Http/Controller/FeedController.php†L118-L215】
- [x] Parameter für personalisierte Schwellenwerte in `config/parameters.yaml` vorbereiten: Gewichtungen, Score-Schwellen und Profilkatalog sind zentral konfigurierbar und werden vom `FeedPersonalizationProfileProvider` an den Feed übergeben.【F:config/parameters.yaml†L233-L282】【F:config/services.yaml†L1044-L1075】【F:src/Service/Feed/FeedPersonalizationProfileProvider.php†L17-L86】

## 2. Storytelling-Erlebnis aufwerten
- [x] Storyboards aus dem JSON-Feed ableiten und in Slideshow-Generierung sowie UI integrieren: `FeedController` liefert jetzt einen `storyboard`-Block mit Folieninformationen, Übergängen, Dauer- und Kontextangaben, während `SlideshowVideoManager` und `SlideshowVideoGenerator` dieselben Daten für die Videoerstellung nutzen.【F:src/Http/Controller/FeedController.php†L312-L392】【F:src/Service/Slideshow/SlideshowVideoManager.php†L41-L139】【F:src/Service/Slideshow/SlideshowVideoGenerator.php†L39-L269】
- [x] Konfigurierbare Musik-, Übergangs- und Dauerparameter definieren: Sämtliche Werte werden nun über `config/parameters.yaml` gesteuert und in Services injiziert; FFMPEG greift optional auf eine konfigurierte Audiodatei zu.【F:config/parameters.yaml†L306-L316】【F:config/services.yaml†L90-L118】【F:src/Service/Slideshow/SlideshowVideoGenerator.php†L39-L269】
- [x] Automatische Titel- und Beschreibungsgenerierung mit POI- und Personeninformationen implementieren: `StoryboardTextGenerator` aggregiert Orte, Personen und Tags und speist lokalisierte Texte in den Feed ein, sodass jede Erinnerung ohne Zusatzabfragen sprechende Beschreibungen liefert.【F:src/Service/Feed/StoryboardTextGenerator.php†L17-L255】【F:src/Http/Controller/FeedController.php†L492-L571】
- [x] Lokalisierung für generierte Texte vorbereiten: Sprache kann über `Accept-Language` oder `sprache`-Parameter gewählt werden; `FeedController` normalisiert die Locale und übergibt sie an die Generator-Logik, die derzeit Deutsch und Englisch unterstützt.【F:src/Http/Controller/FeedController.php†L196-L210】【F:src/Http/Controller/FeedController.php†L347-L386】【F:src/Service/Feed/StoryboardTextGenerator.php†L91-L143】

## 3. Mobile-first Frontend neu denken
- [x] Komponentenbasierte SPA (z. B. Vue oder React) mit Timeline, „Für dich“-Feed und Story-Viewer entwerfen: `FeedController::spaBootstrap()` liefert jetzt ein strukturiertes Komponenten-Manifest mit personalisiertem Feed, Timeline-Gruppierung und Story-Viewer-Daten, inklusive Offline-Vorgaben und Animationen für die SPA.【F:src/Http/Controller/FeedController.php†L194-L235】【F:src/Http/Controller/FeedController.php†L1530-L1696】【F:test/Unit/Http/Controller/FeedControllerTest.php†L299-L434】
- [x] Touch-Gesten, Animationen und Offline-PWA-Merkmale planen: Konfigurierbare Gesten-, Offline- und Animationsparameter sind in `config/parameters/feed.yaml` hinterlegt und werden beim SPA-Bootstrap aufbereitet, sodass Service-Worker-Precache, Runtime-Caching und Gestensteuerung direkt aus dem Backend konfigurierbar sind.【F:config/parameters/feed.yaml†L71-L99】【F:src/Http/Controller/FeedController.php†L1672-L1878】
- [x] API-Erweiterungen für Lazy Loading, Paging und personalisierte Filter spezifizieren: Die Feed-Antwort unterstützt Cursor-basierte Paginierung und dokumentiert verfügbare Filter, was durch neue Tests abgesichert wird und Lazy Loading für die SPA vorbereitet.【F:src/Http/Controller/FeedController.php†L238-L359】【F:test/Unit/Http/Controller/FeedControllerTest.php†L187-L297】

## 4. Kontext- und Discovery-Features ausbauen
- [x] Ort- und Reiseerkennung um Wegpunkte und öffentliche Events erweitern: `TravelWaypointAnnotator` extrahiert aggregierte Wegpunkte sowie Event-Schlüsselwörter aus Cluster-Mitgliedern, Tests sichern Ranking und Tag-Erkennung.【F:src/Service/Clusterer/TravelWaypointAnnotator.php†L34-L359】【F:test/Unit/Service/Clusterer/TravelWaypointAnnotatorTest.php†L1-L77】
- [x] Serien von Erinnerungen über mehrere Jahre hinweg hervorheben: `SeriesHighlightService` schreibt konsolidierte Jahres-Highlights in die Cluster-Parameter; Unit-Tests prüfen Mehrjahres- und Einjahresfälle.【F:src/Service/Feed/SeriesHighlightService.php†L34-L146】【F:test/Unit/Service/Feed/SeriesHighlightServiceTest.php†L1-L69】
- [x] Benachrichtigungs- und Planungslogik (z. B. „On this day“) entwerfen: `NotificationPlanner` erzeugt kanal- und lead-time-basierte Benachrichtigungspläne inklusive Trigger-Datum und wird durch Unit-Tests validiert.【F:src/Service/Feed/NotificationPlanner.php†L34-L237】【F:test/Unit/Service/Feed/NotificationPlannerTest.php†L1-L87】

## 5. Qualitätssicherung und Betrieb stärken
- [ ] CI/CD-Pipelines mit `composer ci:test` und `npm run test:e2e` automatisieren: `composer ci:test` scheitert weiterhin am fehlenden Wrapper `bin/php` und ist daher blockiert; die Dokumentation hält den Status fest.【F:docs/test-report.md†L1-L80】
- [x] Parameter in `config/parameters.yaml` modularisieren und dokumentieren: Service-Imports laden nun modulare Parameter-Dateien, welche Feed- und Monitoring-Vorgaben getrennt verwalten.【F:config/services.yaml†L1-L19】【F:config/parameters/feed.yaml†L1-L35】【F:config/parameters/monitoring.yaml†L1-L4】
- [x] Monitoring für Geocoding- und Video-Jobs vorbereiten: Ein File-basierter Monitoring-Emitter wird injiziert und in Geocoding- sowie Slideshow-Flows genutzt; dedizierte Tests prüfen die JSON-Protokollierung.【F:src/Service/Monitoring/FileJobMonitoringEmitter.php†L25-L70】【F:src/Service/Geocoding/DefaultPoiUpdateProcessor.php†L34-L107】【F:src/Service/Slideshow/SlideshowVideoManager.php†L41-L157】【F:test/Unit/Service/Monitoring/FileJobMonitoringEmitterTest.php†L31-L54】
