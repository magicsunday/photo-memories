#!/bin/sh
. "$(dirname "$0")/_/husky.sh"
if [ -f package.json ] && npx --no install --yes lint-staged >/dev/null 2>&1; then
  npx --no install lint-staged
fi
if command -v make >/dev/null 2>&1 && [ -f Makefile ]; then
  make -q format 2>/dev/null && make format || true
  make -q lint 2>/dev/null && make lint || true
  make -q typecheck 2>/dev/null && make typecheck || true
  make -q test 2>/dev/null && make test || true
fi
[ -f package.json ] && npm run -s lint --if-present && npm run -s typecheck --if-present && npm run -s test --if-present
[ -f pyproject.toml ] && ruff check . >/dev/null && pyright >/dev/null || true
[ -f composer.json ] && composer run -q lint || true && composer run -q stan || true
[ -f go.mod ] && (golangci-lint run || go vet ./...) || true
